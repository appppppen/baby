webpackJsonp([1],{Fvq8:function(e,t){},M93x:function(e,t,r){"use strict";function n(e){r("Fvq8")}var o=r("xJD8"),i=r("ZxS3"),a=r("VU/8"),c=n,s=a(o.a,i.a,!1,c,null,null);t.a=s.exports},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),o=r("M93x"),i=r("7t+N"),a=r.n(i),c=r("v5o6"),s=r.n(c),l=r("VU6J"),v=r.n(l);window.$=a.a,s.a.attach(document.body),window.HANDJS=v.a,n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:o.a}})},ZxS3:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e._m(0),e._v(" "),e._m(1),e._v(" "),r("div",{style:"position:absolute;z-index:666;width:100%;height:100%;background:rgba(0,0,0,0.5)",attrs:{id:"ts"}},[r("div",{style:"position:absolute;z-index:666;width:100px;height:50px;margin:auto;left:0;right:0;top:21%;"},[r("img",{style:"height:14px;width:auto;position:absolute;left:0;right:0;margin:auto;",attrs:{src:"static/image/jt.png",alt:""}}),e._v(" "),r("img",{style:"height:40px;width:auto;position:absolute;right:-225px;top:-20px;margin:auto;",attrs:{src:"static/image/ts.png",alt:""}})])]),e._v(" "),r("div",{staticClass:"hidden",attrs:{id:"notSupported"}},[e._v("loading...")])])},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"control-container"},[r("p",[e._v("黄赤交角与太阳直射范围")]),e._v(" "),r("i",{attrs:{id:"clear"}},[r("img",{staticClass:"btn",attrs:{src:"static/image/chongzhi.png"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"renderCanvas-container"},[r("canvas",{staticStyle:{opacity:"1"},attrs:{id:"renderCanvas","touch-action":"none",width:"1920",height:"1080",tabindex:"1"}})])}],i={render:n,staticRenderFns:o};t.a=i},xJD8:function(e,t,r){"use strict";t.a={data:function(){return{isMob:/iPad|Android/g.test(navigator.userAgent),canvas:null}},methods:{init:function(){this.canvas=document.getElementById("renderCanvas");var e=new BABYLON.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0});if(BABYLON.Engine.isSupported()){var t=this.loadCustomScene(this.createScene,function(e){},e),r=0,n=function(){var e=null;if(t){if(t.activeCamera){if(++r%4!=0)return;t.render()}if(t.useDelayedTextureLoading){t.getWaitingItemsCount()<=0&&(document.getElementById("notSupported").className="hidden")}else if(!e){var n=t.getWaitingItemsCount();0==n&&(e=!0,document.getElementById("notSupported").className="hidden")}}};e.runRenderLoop(n),$(".renderCanvas-container").height($(window).height()),e.resize(),window.addEventListener("resize",function(){$(".renderCanvas-container").height($(window).height()),e.resize()})}else;},loadCustomScene:function(e,t,r){var n=this;document.getElementById("notSupported").className="";var o=e(r);return o.activeCamera,o.executeWhenReady(function(){n.canvas.style.opacity=1,t&&t(o)}),o},createScene:function(e){function t(e,t,r,n){var o=e*Math.cos(t*Math.PI/180),i=e*Math.sin(t*Math.PI/180);return"x"==n?new BABYLON.Vector3(r,o,i):"z"==n?new BABYLON.Vector3(o,i,r):new BABYLON.Vector3(o,r,i)}function r(e,r,n,o){for(var i=[],a=0;a<=r;a+=3/e)i.push(t(e,a,n,o));return i.push(t(e,r,n,o)),i}function n(e,t,n,o,i,a){var c=r(e,t,n,a),s=BABYLON.MeshBuilder.CreateLines("lines",{points:c,updatable:!0,instance:s},i);return s.color=o,s}function o(e,t,n,o,i,a){var c=r(e,t,n,a),s=BABYLON.Mesh.CreateDashedLines("lines",c,10,10,c.length,i,!0,s);return s.color=o,s}function i(e,t,r,o,i){var a=Math.cos(e*Math.PI/180)*t;if(i)var c=Math.sqrt(t*t-a*a);else var c=-Math.sqrt(t*t-a*a);n(a,r,c,o).setParent(m)}function a(e,t,r,n,i){var a=Math.cos(e*Math.PI/180)*t;if(i)var c=Math.sqrt(t*t-a*a);else var c=-Math.sqrt(t*t-a*a);o(a,r,c,n).setParent(m)}function c(){p.rotation.z=0,P.text="黄赤交角:0°",V.text="太阳直射范围:0°",z.position=new BABYLON.Vector3(0,b,0),d.radius=15,d.alpha=-Math.PI/2,d.beta=Math.PI/2-Math.PI/12}var s="precision highp float;\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\nuniform mat4 worldViewProjection;\r\nvarying vec3 vPosition;\r\nvarying vec3 vNormal;\r\nvarying vec2 vUV;\r\nvoid main(void) {\r\nvec4 outPosition = worldViewProjection * vec4(position, 1.0);\r\ngl_Position = outPosition;\r\nvUV = uv;\r\nvPosition = position;\r\nvNormal = normal;\r\n}\r\n",l=this;this.canvas=e.getRenderingCanvas(),e.enableOfflineSupport=!1;var v=new BABYLON.Scene(e);new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,1,0),v).intensity=.1;var h=new BABYLON.DirectionalLight("Omni2",new BABYLON.Vector3(-1,0,0),v);h.intensity=1;var d=new BABYLON.ArcRotateCamera("Camera",-Math.PI/2,Math.PI/2-Math.PI/12,15,BABYLON.Vector3.Zero(),v);d.lowerRadiusLimit=15,d.upperRadiusLimit=15,d.minZ=1,d.layerMask=2,v.activeCamera=d,v.clearColor.set(0,0,.3,1);var m=new BABYLON.Mesh("g",v);m.position=new BABYLON.Vector3(0,0,0);var u=new BABYLON.Mesh("g",v);u.position=new BABYLON.Vector3(0,0,0);var p=new BABYLON.Mesh("p",v);p.position=new BABYLON.Vector3(0,0,0),m.setParent(p);var B=new BABYLON.Texture("./static/earth/earth8k.jpg",v),g=new BABYLON.Texture("./static/earth/night.jpg",v);BABYLON.Effect.ShadersStore.earthVertexShader=s,BABYLON.Effect.ShadersStore.earthFragmentShader="precision highp float;\r\nvarying vec3 vPosition;\r\nvarying vec3 vNormal;\r\nvarying vec2 vUV;\r\nuniform mat4 world;\r\nuniform vec3 cameraPosition;\r\nuniform vec3 lightVectorW;\r\nuniform sampler2D daySampler;\r\nuniform sampler2D nightSampler;\r\nuniform float intsmooth;\r\nuniform float intsmootht;\r\nvoid main(void) {\r\nvec3 vPositionW = vec3(world * vec4(vPosition, 1.0));\r\nvec3 vNormalW = normalize(vec3(world * vec4(vNormal, 0.0)));\r\nvec3 viewDirectionW = normalize(cameraPosition - vPositionW);\r\nvec4 daycolor = texture2D(daySampler, vUV).rgba;\r\nvec4 nightcolor = texture2D(nightSampler, vUV).rgba;\r\nfloat ndl = max(0., dot(vNormalW, lightVectorW)) * intsmooth;\r\nfloat ndlt = max(0., dot(vNormalW, lightVectorW)) * intsmootht;\r\nvec3 angleW = normalize(viewDirectionW + lightVectorW);\r\nfloat specComp = max(0., dot(vNormalW, angleW));\r\nspecComp = pow(specComp, max(1., 64.)) *0.1;\r\nvec4 color=vec4(0.,0.,0.,0.);\r\nif (nightcolor.r*(1.-ndlt)>=0.3) {\r\nnightcolor.rgb=nightcolor.rgb*1.5;\r\nnightcolor.rg=nightcolor.rg+vec2(0.2,0.2);\r\n\r\n}else{\r\nnightcolor.rgb=nightcolor.rgb*0.1;\r\n\r\n}daycolor.rgb =nightcolor.rgb*(1.-ndl)+ daycolor.rgb* ndl + vec3(specComp);\r\ngl_FragColor = vec4(daycolor);\r\n}\r\n";var f=new BABYLON.ShaderMaterial("shader",v,{vertex:"earth",fragment:"earth"},{attributes:["position","normal","uv"],uniforms:["world","worldView","worldViewProjection","view","projection"]});f.setTexture("daySampler",B),f.setTexture("nightSampler",g),f.setVector3("cameraPosition",v.activeCamera.position),f.setFloat("intsmooth",1),f.setFloat("intsmootht",5),f.setVector3("lightVectorW",new BABYLON.Vector3(-h.direction.x,-h.direction.y,-h.direction.z)),f.backFaceCulling=!1;var N=BABYLON.Mesh.CreateSphere("earth",32,6,v);N.material=f,N.rotation=new BABYLON.Vector3(0,0,Math.PI),N.setParent(m);var w=new BABYLON.Texture("./static/earth/cloud.png",v);BABYLON.Effect.ShadersStore.planVertexShader=s,BABYLON.Effect.ShadersStore.planFragmentShader="precision highp float;\r\nvarying vec3 vPosition;\r\nvarying vec3 vNormal;\r\nvarying vec2 vUV;\r\nuniform mat4 world;\r\nuniform vec3 cameraPosition;\r\nuniform vec3 lightVectorW;\r\nuniform sampler2D textureSampler;\r\nuniform float mixsmooth;\r\nuniform float intsmooth;\r\nuniform float time;\r\nvoid main(void) {\r\nvec3 vPositionW = vec3(world * vec4(vPosition, 1.0));\r\nvec3 vNormalW = normalize(vec3(world * vec4(vNormal, 0.0)));\r\nvec3 viewDirectionW = normalize(cameraPosition - vPositionW);\r\nvec4 color = texture2D(textureSampler, vUV).rgba;\r\nfloat ndl = max(0., dot(vNormalW, lightVectorW)) * intsmooth;\r\nvec3 angleW = normalize(viewDirectionW + lightVectorW);\r\nfloat specComp = max(0., dot(vNormalW, angleW));\r\nspecComp = pow(specComp, max(1., 64.)) * 0.1;\r\ncolor.rgb =color.rgb*mixsmooth+ color.rgb* ndl + vec3(specComp);\r\ngl_FragColor = vec4(color);\r\n}\r\n";var L=new BABYLON.ShaderMaterial("shader",v,{vertex:"plan",fragment:"plan"},{attributes:["position","normal","uv"],uniforms:["world","worldView","worldViewProjection","view","projection"],needAlphaBlending:!0});L.setTexture("textureSampler",w),L.setVector3("cameraPosition",v.activeCamera.position),L.setFloat("mixsmooth",.1),L.setFloat("intsmooth",3),L.setFloat("time",0),L.setVector3("lightVectorW",new BABYLON.Vector3(-h.direction.x,-h.direction.y,-h.direction.z)),L.backFaceCulling=!1;var A=BABYLON.Mesh.CreateSphere("earth",32,6.1,v);A.material=L,A.rotation=new BABYLON.Vector3(0,0,Math.PI),A.setParent(u),u.setParent(m),BABYLON.Mesh.CreateSphere("txt",4,.01,v).position=new BABYLON.Vector3(0,2.25,0),BABYLON.Mesh.CreateSphere("txt2",4,.01,v).position=new BABYLON.Vector3(0,-2.25,0);var x,O=new BABYLON.Color3(.5,.5,.5),Y=new BABYLON.Color3(.8,.8,0);!function(e,t,r){for(x=0;x<90;x+=t)0==x||(i(x,e,360,r),i(x,e,360,r,!0))}(3.01,15,O),a(23.26,3.01,360,Y,!0),a(23.26,3.01,360,Y),a(66.74,3.01,360,Y),a(66.74,3.01,360,Y,!0),function(e,t,r){for(x=0;x<Math.PI;x+=Math.PI/t){var o=n(e,360,0,r,v,"x"),i=new BABYLON.Vector3(0,x,0);o.rotation=i,o.setParent(m)}}(3.01,12,O),i(0,3.01,360,Y);var C=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");C.layer.layerMask=2;var M=new BABYLON.GUI.StackPanel;M.width="300px",M.fontSize="18px",M.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,M.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,C.addControl(M);var P=new BABYLON.GUI.TextBlock;P.text="黄赤交角:0°",P.height="150px",P.color="#ff0",P.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,P.paddingTop="50px",M.addControl(P);var V=new BABYLON.GUI.TextBlock;V.text="太阳直射范围:0°",V.height="40px",V.color="#ff0",V.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,V.paddingTop="10px",M.addControl(V);var y=new BABYLON.Texture("static/sb.jpg",v),S=new BABYLON.StandardMaterial("kosh2",v),I=BABYLON.Mesh.CreateSphere("skyBox",50,2e3,v);S.diffuseTexture=y,S.emissiveTexture=y,S.backFaceCulling=!1,I.material=S;var b=3.6,W=-b,T=b,_=BABYLON.Mesh.CreateCylinder("cylinder",2*b+.6,.05,.05,16,1,v),E=new BABYLON.StandardMaterial("cylinder",v);E.emissiveColor=BABYLON.Color3.Gray(),_.material=E,_.setParent(m);var z=BABYLON.Mesh.CreateSphere("controller",32,1.8,v);z.position=new BABYLON.Vector3(0,b,0),z.isVisible=!1;var k=BABYLON.Mesh.CreateGround("ground",2*b+10,2*b+5,1,v,!1);k.rotation.x=Math.PI/12-Math.PI/2,k.isVisible=!1;var F=BABYLON.MeshBuilder.CreatePlane("ctrl",{width:9,height:7},v);F.material=new BABYLON.StandardMaterial("red",v),F.material.diffuseColor=new BABYLON.Color3(1,1,1),F.material.specularColor=new BABYLON.Color3(1,1,1),F.material.emissiveColor=new BABYLON.Color3(1,1,0),F.material.alpha=.5,F.layerMask=2,F.rotation.x=Math.PI/2;var D,U,G=function(){var e=v.pick(v.pointerX,v.pointerY,function(e){return e==k});return e.hit?e.pickedPoint:null},R=!1,j=function(e){if(0===e.button){var t=v.pick(v.pointerX,v.pointerY,function(e){return e!==k});t.hit&&(0==R&&(U=t.pickedMesh),"controller"==U.name&&(R=!0,D=G()))}},H=function(){if(D)return D=null,void(R=!1)},q=function(e){if(D){var t=G();if(t){var r;D.x<=T&&D.x>=W?(U.position.x=D.x,U.position.y=Math.sqrt(b*b-D.x*D.x),r=Math.atan(U.position.x/U.position.y)):D.x>T?(U.position.x=T,U.position.y=0,r=.5*Math.PI):D.x<W&&(U.position.x=W,U.position.y=0,r=-.5*Math.PI);var n=(U.position.x,Math.PI,r/Math.PI*180),o=Math.abs(n.toFixed(2));P.text="黄赤交角:"+o+"°",V.text="太阳直射范围:"+o+"°N~0°~"+o+"°S",p.rotation.z=-r,D=t}else if(D)return D=null,void(R=!1)}};l.canvas.addEventListener("pointerdown",j,!1),l.canvas.addEventListener("pointerup",H,!1),l.canvas.addEventListener("pointermove",q,!1),v.onDispose=function(){l.canvas.removeEventListener("pointerdown",j),l.canvas.removeEventListener("pointerup",H),l.canvas.removeEventListener("pointermove",q)},$("#ts").on("touchstart",function(){$("#ts").hide()}),$("#ts").on("click",function(){$("#ts").hide()});var Z=0;return v.registerBeforeRender(function(){var e=v.activeCamera.position,t=new BABYLON.Vector3(-h.direction.x,-h.direction.y,-h.direction.z);L.setVector3("cameraPosition",e),L.setVector3("lightVectorW",t),L.setFloat("time",Z),f.setVector3("cameraPosition",e),f.setVector3("lightVectorW",t),u.rotation=new BABYLON.Vector3(0,.2*Z,0),m.rotation=new BABYLON.Vector3(0,-Z,0),Z+=.002}),this.isMob?$("#clear").on("touchstart",c):$("#clear").on("click",c),v}},mounted:function(){this.init()}}}},["NHnr"]);